#pragma once
#include <unordered_map>
using namespace std;

typedef struct
{
  const char *utf8;
  const char *entity;
  const char *code;
} HtmlEntity;

// Use book: entities_ww2.epub to test this (Page 7: Entities parser test)
// Note the supported keys are only in lowercase
// Store the mappings in a unordered hash map
unordered_map<string, string> convert({
    {"&quot;" , "\""},
    {"&#34;"  , "\""},
    {"&frasl;", "/"},
    {"&nbsp;" , " "},
    {"&deg;"  , "°"},
    {"&#176;" , "°"},
    {"&agrave;", "À"},
    {"&#192;"  , "À"},
    {"&aacute;", "Á"},
    {"&#193;"  , "Á"},
    {"&acirc;" , "Â"},
    {"&#194;"  , "Â"},
    {"&atilde;", "Ã"},
    {"&#195;"  , "Ã"},
    {"&auml;"  , "Ä"},
    {"&#196;"  , "Ä"},
    {"&aring;" , "Å"},
    {"&#197;"  , "Å"},
    {"&aelig;" , "Æ"},
    {"&#198;"  , "Æ"},
    {"&ccedil;", "Ç"},
    {"&#199;"  , "Ç"},
    {"&egrave;", "È"},
    {"&#200;"  , "È"},
    {"&eacute;", "É"},
    {"&#201;"  , "É"},
    {"&ecirc;" , "Ê"},
    {"&#202;"  , "Ê"},
    {"&euml;"  , "Ë"},
    {"&#203;"  , "Ë"},
    {"&igrave;", "Ì"},
    {"&#204;"  , "Ì"},
    {"&iacute;", "Í"},
    {"&#205;"  , "Í"},
    {"&icirc;" , "Î"},
    {"&#206;"  , "Î"},
    {"&iuml;"  , "Ï"},
    {"&#207;"  , "Ï"},
    {"&eth;"   , "Ð"},
    {"&#208;"  , "Ð"},
    {"&ntilde;", "Ñ"},
    {"&#209;"  , "Ñ"},
    {"&ograve;", "Ò"},
    {"&#210;"  , "Ò"},
    {"&oacute;", "Ó"},
    {"&#211;"  , "Ó"},
    {"&ocirc;" , "Ô"},
    {"&#212;"  , "Ô"},
    {"&otilde;", "Õ"},
    {"&#213;"  , "Õ"},
    {"&ouml;"  , "Ö"},
    {"&#214;"  , "Ö"},
    {"&oslash;", "Ø"},
    {"&#216;"  , "Ø"},
    {"&ugrave;", "Ù"},
    {"&#217;"  , "Ù"},
    {"&uacute;", "Ú"},
    {"&#218;"  , "Ú"},
    {"&ucirc;" , "Û"},
    {"&#219;"  , "Û"},
    {"&uuml;"  , "Ü"},
    {"&#220;"  , "Ü"},
    {"&yacute;", "Ý"},
    {"&#221;"  , "Ý"},
    {"&thorn;" , "Þ"},
    {"&szlig;" , "ß"},
    {"&#223;"  , "ß"},
    {"&laquo;" , "«"},
    {"&#171;"  , "«"},
    {"&raquo;" , "»"},
    {"&#187;"  , "»"},
    {"&euro;"  , "€"},
    {"&#8364;" , "€"},
    {"&pound;" , "£"},
    {"&#163;"  , "£"},
    {"&copy;"  , "©"},
    {"&#169;"  , "©"},
});

const HtmlEntity htmlEntity[] = {  
    {"à", "&agrave;", "&#224;"},
    {"á", "&aacute;", "&#225;"},
    {"â", "&acirc;", "&#226;"},
    {"ã", "&atilde;", "&#227;"},
    {"ä", "&auml;", "&#228;"},
    {"å", "&aring;", "&#229;"},
    {"æ", "&aelig;", "&#230;"},
    {"ç", "&ccedil;", "&#231;"},
    {"è", "&egrave;", "&#232;"},
    {"é", "&eacute;", "&#233;"},
    {"ê", "&ecirc;", "&#234;"},
    {"ë", "&euml;", "&#235;"},
    {"ì", "&igrave;", "&#236;"},
    {"í", "&iacute;", "&#237;"},
    {"î", "&icirc;", "&#238;"},
    {"ï", "&iuml;", "&#239;"},
    {"ð", "&eth;", "&#240;"},
    {"ñ", "&ntilde;", "&#241;"},
    {"ò", "&ograve;", "&#242;"},
    {"ó", "&oacute;", "&#243;"},
    {"ô", "&ocirc;", "&#244;"},
    {"õ", "&otilde;", "&#245;"},
    {"ö", "&ouml;", "&#246;"},
    {"ø", "&oslash;", "&#248;"},
    {"ù", "&ugrave;", "&#249;"},
    {"ú", "&uacute;", "&#250;"},
    {"û", "&ucirc;", "&#251;"},
    {"ü", "&uuml;", "&#252;"},
    {"ý", "&yacute;", "&#253;"},
    {"þ", "&thorn;", "&#254;"},
    {"ÿ", "&yuml;", "&#255;"},
    {" ", "&nbsp;", "&#160;"},
    {"¡", "&iexcl;", "&#161;"},
    {"¢", "&cent;", "&#162;"},
    
    {"¤", "&curren;", "&#164;"},
    {"¥", "&yen;", "&#165;"},
    {"¦", "&brvbar;", "&#166;"},
    {"§", "&sect;", "&#167;"},
    {"¨", "&uml;", "&#168;"},
    {"ª", "&ordf;", "&#170;"},
    {"¬", "&not;", "&#172;"},
    {"­", "&shy;", "&#173;"},
    {"®", "&reg;", "&#174;"},
    {"¯", "&macr;", "&#175;"},
    {"±", "&plusmn;", "&#177;"},
    {"²", "&sup2;", "&#178;"},
    {"³", "&sup3;", "&#179;"},
    {"´", "&acute;", "&#180;"},
    {"µ", "&micro;", "&#181;"},
    {"¶", "&para;", "&#182;"},
    {"¸", "&cedil;", "&#184;"},
    {"¹", "&sup1;", "&#185;"},
    {"º", "&ordm;", "&#186;"},
    {"¼", "&frac14;", "&#188;"},
    {"½", "&frac12;", "&#189;"},
    {"¾", "&frac34;", "&#190;"},
    {"¿", "&iquest;", "&#191;"},
    {"×", "&times;", "&#215;"},
    {"÷", "&divide;", "&#247;"},
    {"∀", "&forall;", "&#8704;"},
    {"∂", "&part;", "&#8706;"},
    {"∃", "&exist;", "&#8707;"},
    {"∅", "&empty;", "&#8709;"},
    {"∇", "&nabla;", "&#8711;"},
    {"∈", "&isin;", "&#8712;"},
    {"∉", "&notin;", "&#8713;"},
    {"∋", "&ni;", "&#8715;"},
    {"∏", "&prod;", "&#8719;"},
    {"∑", "&sum;", "&#8721;"},
    {"−", "&minus;", "&#8722;"},
    {"∗", "&lowast;", "&#8727;"},
    {"√", "&radic;", "&#8730;"},
    {"∝", "&prop;", "&#8733;"},
    {"∞", "&infin;", "&#8734;"},
    {"∠", "&ang;", "&#8736;"},
    {"∧", "&and;", "&#8743;"},
    {"∨", "&or;", "&#8744;"},
    {"∩", "&cap;", "&#8745;"},
    {"∪", "&cup;", "&#8746;"},
    {"∫", "&int;", "&#8747;"},
    {"∴", "&there4;", "&#8756;"},
    {"∼", "&sim;", "&#8764;"},
    {"≅", "&cong;", "&#8773;"},
    {"≈", "&asymp;", "&#8776;"},
    {"≠", "&ne;", "&#8800;"},
    {"≡", "&equiv;", "&#8801;"},
    {"≤", "&le;", "&#8804;"},
    {"≥", "&ge;", "&#8805;"},
    {"⊂", "&sub;", "&#8834;"},
    {"⊃", "&sup;", "&#8835;"},
    {"⊄", "&nsub;", "&#8836;"},
    {"⊆", "&sube;", "&#8838;"},
    {"⊇", "&supe;", "&#8839;"},
    {"⊕", "&oplus;", "&#8853;"},
    {"⊗", "&otimes;", "&#8855;"},
    {"⊥", "&perp;", "&#8869;"},
    {"⋅", "&sdot;", "&#8901;"},
    {"Α", "&Alpha;", "&#913;"},
    {"Β", "&Beta;", "&#914;"},
    {"Γ", "&Gamma;", "&#915;"},
    {"Δ", "&Delta;", "&#916;"},
    {"Ε", "&Epsilon;", "&#917;"},
    {"Ζ", "&Zeta;", "&#918;"},
    {"Η", "&Eta;", "&#919;"},
    {"Θ", "&Theta;", "&#920;"},
    {"Ι", "&Iota;", "&#921;"},
    {"Κ", "&Kappa;", "&#922;"},
    {"Λ", "&Lambda;", "&#923;"},
    {"Μ", "&Mu;", "&#924;"},
    {"Ν", "&Nu;", "&#925;"},
    {"Ξ", "&Xi;", "&#926;"},
    {"Ο", "&Omicron;", "&#927;"},
    {"Π", "&Pi;", "&#928;"},
    {"Ρ", "&Rho;", "&#929;"},
    {"Σ", "&Sigma;", "&#931;"},
    {"Τ", "&Tau;", "&#932;"},
    {"Υ", "&Upsilon;", "&#933;"},
    {"Φ", "&Phi;", "&#934;"},
    {"Χ", "&Chi;", "&#935;"},
    {"Ψ", "&Psi;", "&#936;"},
    {"Ω", "&Omega;", "&#937;"},
    {"α", "&alpha;", "&#945;"},
    {"β", "&beta;", "&#946;"},
    {"γ", "&gamma;", "&#947;"},
    {"δ", "&delta;", "&#948;"},
    {"ε", "&epsilon;", "&#949;"},
    {"ζ", "&zeta;", "&#950;"},
    {"η", "&eta;", "&#951;"},
    {"θ", "&theta;", "&#952;"},
    {"ι", "&iota;", "&#953;"},
    {"κ", "&kappa;", "&#954;"},
    {"λ", "&lambda;", "&#955;"},
    {"μ", "&mu;", "&#956;"},
    {"ν", "&nu;", "&#957;"},
    {"ξ", "&xi;", "&#958;"},
    {"ο", "&omicron;", "&#959;"},
    {"π", "&pi;", "&#960;"},
    {"ρ", "&rho;", "&#961;"},
    {"ς", "&sigmaf;", "&#962;"},
    {"σ", "&sigma;", "&#963;"},
    {"τ", "&tau;", "&#964;"},
    {"υ", "&upsilon;", "&#965;"},
    {"φ", "&phi;", "&#966;"},
    {"χ", "&chi;", "&#967;"},
    {"ψ", "&psi;", "&#968;"},
    {"ω", "&omega;", "&#969;"},
    {"ϑ", "&thetasym;", "&#977;"},
    {"ϒ", "&upsih;", "&#978;"},
    {"ϖ", "&piv;", "&#982;"},
    {"Œ", "&OElig;", "&#338;"},
    {"œ", "&oelig;", "&#339;"},
    {"Š", "&Scaron;", "&#352;"},
    {"š", "&scaron;", "&#353;"},
    {"Ÿ", "&Yuml;", "&#376;"},
    {"ƒ", "&fnof;", "&#402;"},
    {"ˆ", "&circ;", "&#710;"},
    {"˜", "&tilde;", "&#732;"},
    {"", "&ensp;", "&#8194;"},
    {"", "&emsp;", "&#8195;"},
    {"", "&thinsp;", "&#8201;"},
    {"‌", "&zwnj;", "&#8204;"},
    {"‍", "&zwj;", "&#8205;"},
    {"‎", "&lrm;", "&#8206;"},
    {"‏", "&rlm;", "&#8207;"},
    {"–", "&ndash;", "&#8211;"},
    {"—", "&mdash;", "&#8212;"},
    {"‘", "&lsquo;", "&#8216;"},
    {"’", "&rsquo;", "&#8217;"},
    {"‚", "&sbquo;", "&#8218;"},
    {"“", "&ldquo;", "&#8220;"},
    {"”", "&rdquo;", "&#8221;"},
    {"„", "&bdquo;", "&#8222;"},
    {"†", "&dagger;", "&#8224;"},
    {"‡", "&Dagger;", "&#8225;"},
    {"•", "&bull;", "&#8226;"},
    {"…", "&hellip;", "&#8230;"},
    {"‰", "&permil;", "&#8240;"},
    {"′", "&prime;", "&#8242;"},
    {"″", "&Prime;", "&#8243;"},
    {"‹", "&lsaquo;", "&#8249;"},
    {"›", "&rsaquo;", "&#8250;"},
    {"‾", "&oline;", "&#8254;"},
    
    {"™", "&trade;", "&#8482;"},
    {"←", "&larr;", "&#8592;"},
    {"↑", "&uarr;", "&#8593;"},
    {"→", "&rarr;", "&#8594;"},
    {"↓", "&darr;", "&#8595;"},
    {"↔", "&harr;", "&#8596;"},
    {"↵", "&crarr;", "&#8629;"},
    {"⌈", "&lceil;", "&#8968;"},
    {"⌉", "&rceil;", "&#8969;"},
    {"⌊", "&lfloor;", "&#8970;"},
    {"⌋", "&rfloor;", "&#8971;"},
    {"◊", "&loz;", "&#9674;"},
    {"♠", "&spades;", "&#9824;"},
    {"♣", "&clubs;", "&#9827;"},
    {"♥", "&hearts;", "&#9829;"},
    {"♦", "&diams;", "&#9830;"}};
